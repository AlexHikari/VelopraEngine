# rendering/CMakeLists.txt
cmake_minimum_required(VERSION 3.8)
project(VelopraRenderer)

# Precompiled header file
set(PRECOMPILED_HEADER "${CMAKE_CURRENT_SOURCE_DIR}/include/pch.h")

# Automatically add all source and header files
file(GLOB_RECURSE RENDERER_SOURCE_FILES "${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp")
file(GLOB_RECURSE RENDERER_HEADER_FILES "${CMAKE_CURRENT_SOURCE_DIR}/include/*.h")

# Create the Renderer library
add_library(VelopraRenderer ${RENDERER_SOURCE_FILES} ${RENDERER_HEADER_FILES})

# Find necessary packages
find_package(OpenGL REQUIRED)
find_package(GLEW REQUIRED)
find_package(glfw3 3.3 REQUIRED)
find_package(assimp REQUIRED)
find_package(glm REQUIRED)

target_include_directories(VelopraRenderer PRIVATE
    ${GLEW_INCLUDE_DIRS}
    ${GLFW_INCLUDE_DIRS}
    ${ASSIMP_INCLUDE_DIRS}
    ${GLM_INCLUDE_DIRS}
)
target_include_directories(VelopraRenderer PUBLIC
    ${CMAKE_CURRENT_SOURCE_DIR}/include
)

# Link with Core module and external libraries
target_link_libraries(VelopraRenderer PRIVATE 
    VelopraCore
    GLEW::GLEW 
    OpenGL::GL 
    glfw
    assimp::assimp
    glm::glm
)

# Enable precompiled headers
target_precompile_headers(VelopraRenderer PRIVATE ${PRECOMPILED_HEADER})
